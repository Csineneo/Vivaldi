// Copyright 2016 The Chromium Authors. All rights reserved.
// Use of this source code is governed by a BSD-style license that can be
// found in the LICENSE file.

#include "core/css/cssom/CSSOMTypes.h"

#include "core/css/CSSPropertyMetadata.h"
#include "core/css/cssom/CSSOMKeywords.h"
#include "core/css/cssom/CSSKeywordValue.h"
#include "core/css/cssom/CSSLengthValue.h"

namespace blink {

bool CSSOMTypes::propertyCanTake(CSSPropertyID id, const StyleValue& styleValue)
{
    // Shortcut special case.
    if (styleValue.type() == StyleValue::SimpleLengthType || styleValue.type() == StyleValue::CalcLengthType) {
        if (toCSSLengthValue(styleValue).containsPercent() && !CSSPropertyMetadata::propertySupportsPercentage(id)) {
            return false;
        }
    } else if (styleValue.type() == StyleValue::KeywordType) {
        // Keywords are also handled differently.
        return CSSOMKeywords::validKeywordForProperty(id, toCSSKeywordValue(styleValue));
    }

    switch (id) {
    {% for property_id, property in properties.items() if property.typedom_types %}
    case {{property_id}}:
    return (
        {% for type in property.typedom_types %}
        {{ "|| " if not loop.first }}styleValue.type() == StyleValue::{{type}}Type
        {% endfor %}
        );
    {% endfor %}
    default:
        return false;
    }
}

}  // namespace blink
