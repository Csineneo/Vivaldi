https://bugzilla.gnome.org/show_bug.cgi?id=780690

--- src/uri.c
+++ src/uri.c
@@ -12,6 +12,7 @@
 #include "third_party/libxml/src/libxml.h"
 
 #include <string.h>
+#include <limits.h>
 
 #include "third_party/libxml/src/include/libxml/xmlmemory.h"
 #include "third_party/libxml/src/include/libxml/uri.h"
@@ -334,7 +335,7 @@ xmlParse3986Port(xmlURIPtr uri, const char **str)
 	    cur++;
 	}
 	if (uri != NULL)
-	    uri->port = port & INT_MAX; /* port value modulo INT_MAX+1 */
+	    uri->port = port & USHRT_MAX; /* port value modulo USHRT_MAX+1 */
 	*str = cur;
 	return(0);
     }
