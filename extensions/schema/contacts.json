// Copyright (c) 2017 Vivaldi Technologies AS. All rights reserved
[
  {
    "namespace": "contacts",
    "description": "Use the <code>vivaldi.contacts</code> API to manipulate contacts.",
    "types": [
      {
        "id": "ContactPropertyName",
        "type": "string",
        "enum": [ "email", "phonenumber" ],
        "description": "Property types for adding, updating and removing email and phonenumbers for contacts."
      },
      {
        "id": "Email",
        "type": "object",
        "description": "An email object",
        "properties": {
          "id": {
            "type": "string",
            "minimum": 0,
            "description": "The unique identifier for the email. IDs are unique within the current profile, and they remain valid even after the browser is restarted."
          },
          "email": {
            "type": "string",
            "optional": true,
            "description": "The email address of the contact."
          },
          "type": {
            "type": "string",
            "optional": true,
            "description": "The type of email. WORK, HOME etc"
          }
        }
      },
      {
        "id": "Phonenumber",
        "type": "object",
        "description": "A phonenumber object",
        "properties": {
          "id": {
            "type": "string",
            "minimum": 0,
            "description": "The unique identifier for the phonenumber. IDs are unique within the current profile, and they remain valid even after the browser is restarted."
          },
          "phonenumber": {
            "type": "string",
            "optional": true,
            "description": "The phonenumber."
          },
          "type": {
            "type": "string",
            "optional": true,
            "description": "The type of phonenumber. WORK, HOME etc"
          }
        }
      },
      {
        "id": "Contact",
        "type": "object",
        "description": "A contact object",
        "properties": {
          "id": {
            "type": "string",
            "minimum": 0,
            "description": "The unique identifier for the contact. IDs are unique within the current profile, and they remain valid even after the browser is restarted."
          },
          "name": {
            "type": "string",
            "optional": true,
            "description": "The name id of the contact."
          },
          "birthday": {
            "type": "number",
            "optional": true,
            "description": "The birthday of the contact."
          },
          "note": {
            "type": "string",
            "optional": true,
            "description": "A note for the contact."
          },
          "emails": {
            "type": "array",
            "items": { "$ref": "Email" }
          },
          "phonenumbers": {
            "type": "array",
            "items": { "$ref": "Phonenumber" }
          }
        }
      },
      {
        "id": "CreateDetails",
        "description": "Object passed to the create() contact function.",
        "inline_doc": true,
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "optional": true,
            "description": "The name of the contact."
          },
          "birthday": {
            "type": "number",
            "optional": true,
            "description": "The birthday of the contact. In milliseconds since epoch"
          },
          "note": {
            "type": "string",
            "description": "The note for the contact.",
            "optional": true
          },
          "generatedFromSentMail": {
            "type": "boolean",
            "description": "Was this contact generated by sent mail.",
            "optional": true
          }
        }
      },
      {
        "id": "AddPropertyDetails",
        "description": "Object passed to the addEmail() function.",
        "inline_doc": true,
        "type": "object",
        "properties": {
          "property_name": {
            "$ref": "ContactPropertyName",
            "optional": false,
            "description": "The type to add (email, phone)."
          },
          "contact_id": {
            "type": "string",
            "optional": false,
            "description": "The id of the contact."
          },
          "property_value": {
            "type": "string",
            "optional": false,
            "description": "The email or phonenumber of the contact."
          },
          "type": {
            "type": "string",
            "optional": true,
            "description": "The type of email. Example: WORK, HOME. Note type=INTERNET is default."
          },
          "asDefault": {
            "type": "boolean",
            "description": "Should the email be default for the contact",
            "optional": true
          }
        }
      },
      {
        "id": "RemovePropertyDetails",
        "description": "Object passed to the removeProperty() function.",
        "inline_doc": true,
        "type": "object",
        "properties": {
          "property_name": {
            "$ref": "ContactPropertyName",
            "optional": false,
            "description": "The property name to remove (email, phone)."
          },
          "contact_id": {
            "type": "string",
            "optional": false,
            "description": "The id of the contact."
          },
          "property_id": {
            "type": "string",
            "optional": false,
            "description": "The email of the contact."
          }
        }
      },
      {
        "id": "UpdatePropertyDetails",
        "description": "Object passed to the updateProperty() function.",
        "inline_doc": true,
        "type": "object",
        "properties": {
          "property_name": {
            "$ref": "ContactPropertyName",
            "optional": false,
            "description": "The property name to be updated (email, phone)."
          },
          "contact_id": {
            "type": "string",
            "optional": false,
            "description": "The id of the contact."
          },
          "property_id": {
            "type": "string",
            "optional": false,
            "description": "The id of the property to be updated."
          },
          "property_value": {
            "type": "string",
            "optional": false,
            "description": "The email or phonenumber value to update for the given contact."
          }
        }
      }
    ],
    "functions": [
      {
        "name": "getAll",
        "type": "function",
        "description": "Retrieves all contacts",
        "parameters": [
          {
            "type": "function",
            "name": "callback",
            "parameters": [
              {
                "name": "results",
                "type": "array",
                "items": {
                  "$ref": "Contact"
                }
              }
            ]
          }
        ]
      },
      {
        "name": "create",
        "type": "function",
        "description": "Creates a contact.",
        "parameters": [
          {
            "$ref": "CreateDetails",
            "name": "contact"
          },
          {
            "type": "function",
            "name": "callback",
            "optional": true,
            "parameters": [
              {
                "name": "result",
                "$ref": "Contact"
              }
            ]
          }
        ]
      },
      {
        "name": "update",
        "type": "function",
        "description": "Updates the properties of a contact. Specify only the properties that you want to change. Unspecified properties will be left unchanged.",
        "parameters": [
          {
            "type": "string",
            "name": "id",
            "description": "The contact id to be updated"
          },
          {
            "type": "object",
            "name": "changes",
            "properties": {
              "name": {
                "description": "The name of the contact",
                "type": "string",
                "optional": true
              },
              "birthday": {
                "description": "The contact birthday, (in milliseconds since epoch)",
                "type": "number",
                "optional": true
              },
              "note": {
                "description": "The updated contact note",
                "type": "string",
                "optional": true
              }
            }
          },
          {
            "type": "function",
            "name": "callback",
            "optional": true,
            "parameters": [
              {
                "name": "result",
                "$ref": "Contact"
              }
            ]
          }
        ]
      },
      {
        "name": "delete",
        "type": "function",
        "description": "Deletes a contact.",
        "parameters": [
          {
            "type": "string",
            "name": "id"
          },
          {
            "type": "function",
            "name": "callback",
            "optional": true,
            "parameters": [
              {
                "name": "result",
                "type": "boolean"
              }
            ]
          }
        ]
      },
      {
        "name": "addPropertyItem",
        "type": "function",
        "description": "Adds a property to a contact.",
        "parameters": [
          {
            "$ref": "AddPropertyDetails",
            "name": "propertyToAdd"
          },
          {
            "type": "function",
            "name": "callback",
            "optional": true,
            "parameters": [
              {
                "name": "result",
                "$ref": "Contact"
              }
            ]
          }
        ]
      },
      {
        "name": "updatePropertyItem",
        "type": "function",
        "description": "Updates a property for a contact.",
        "parameters": [
          {
            "$ref": "UpdatePropertyDetails",
            "name": "propertyToUpdate"
          },
          {
            "type": "function",
            "name": "callback",
            "optional": true,
            "parameters": [
              {
                "name": "result",
                "$ref": "Contact"
              }
            ]
          }
        ]
      },
      {
        "name": "removePropertyItem",
        "type": "function",
        "description": "Removes a property from a contact.",
        "parameters": [
          {
            "$ref": "RemovePropertyDetails",
            "name": "propertyToRemove"
          },
          {
            "type": "function",
            "name": "callback",
            "optional": true,
            "parameters": [
              {
                "name": "result",
                "$ref": "Contact"
              }
            ]
          }
        ]
      }
    ],
    "events": [
      {
        "name": "onContactCreated",
        "type": "function",
        "description": "Fired when a contact is created.",
        "parameters": [
          {
            "name": "createdContact",
            "$ref": "Contact",
            "description": "The created contact"
          }
        ]
      },
      {
        "name": "onContactRemoved",
        "type": "function",
        "description": "Fired when contact is deleted.",
        "parameters": [
          {
            "name": "removedContact",
            "$ref": "Contact",
            "description": "The deleted contact"
          }
        ]
      },
      {
        "name": "onContactChanged",
        "type": "function",
        "description": "Fired when contact is updated.",
        "parameters": [
          {
            "name": "changedContact",
            "$ref": "Contact",
            "description": "The changed contact"
          }
        ]
      }
    ]
  }
]
